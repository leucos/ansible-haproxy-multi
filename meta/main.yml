---
galaxy_info:
  author: Michel Blanc
  description: HAproxy multi-configurations role
#  company:
  license: MIT
  min_ansible_version: 1.8
  #
  # Below are all platforms currently available. Just uncomment
  # the ones that apply to your role. If you don't see your
  # platform on this list, let us know and we'll get it added!
  #
  platforms:
  - name: Ubuntu
    versions:
    - all
  - name: Debian
    versions:
      - all
  categories:
    - web

dependencies:
  - role: ansible-datadog-agent
    src: https://github.com/leucos/ansible-datadog-agent.git
    when: datadog_api_key | default(false)
  - role: ansible-ferm
    src: https://github.com/leucos/ansible-ferm.git
    ferm_input_group_list:
      - type: 'dport_accept'
        protocols: 'tcp'
        dport: [ '{{ haproxy_stats_port }}' ]
        saddr: [ '0.0.0.0/0' ]
        weight: '40'
        filename: 'haproxy_clients_accept'
